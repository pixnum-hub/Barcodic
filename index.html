<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barcodic â€“ Professional Barcode Generator</title>

<meta name="theme-color" content="#0f172a">
<link rel="manifest" href="/YOUR-REPO-NAME/manifest.json">

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

<style>
/* --- SAME UI DESIGN --- */
:root{
  --bg-dark:#0f172a; --glass-dark:rgba(255,255,255,.06);
  --border-dark:rgba(255,255,255,.15); --text-dark:#f1f5f9;
  --bg-light:#e2e8f0; --glass-light:rgba(255,255,255,.7);
  --border-light:rgba(0,0,0,.1); --text-light:#0f172a;
}
body{margin:0;font-family:'Segoe UI',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;background:var(--bg-dark);color:var(--text-dark);transition:.3s}
.app-frame{width:95%;max-width:420px;padding:25px 20px 40px;border-radius:25px;backdrop-filter:blur(18px);background:var(--glass-dark);border:1px solid var(--border-dark);box-shadow:8px 8px 20px #0b1120,-8px -8px 20px #1e293b;position:relative;text-align:center}
.toggle-btn{position:absolute;top:15px;right:15px;width:42px;height:42px;border-radius:50%;border:none;cursor:pointer;background:linear-gradient(145deg,#1e293b,#0f172a);color:#fff;font-size:18px}
input,textarea,select{width:100%;box-sizing:border-box;padding:12px;margin:8px 0;border-radius:12px;border:1px solid var(--border-dark);background:rgba(255,255,255,.05);color:inherit;font-size:15px}
button.action{width:100%;padding:12px;margin-top:10px;border-radius:12px;border:none;font-size:15px;cursor:pointer;background:linear-gradient(145deg,#a8dadc,#74c69d);color:#0f172a;font-weight:600}
.barcode-item{margin-top:20px;padding:12px;border-radius:14px;background:rgba(255,255,255,.04);border:1px solid var(--border-dark);display:flex;flex-direction:column;align-items:center}
footer{margin-top:25px;font-size:12px;opacity:.8}
.light{background:var(--bg-light);color:var(--text-light)}
.light .app-frame{background:var(--glass-light);border:1px solid var(--border-light)}
.light input,.light textarea,.light select{background:#fff}

/* Splash */
#splash{position:fixed;inset:0;background:linear-gradient(145deg,#0f172a,#1e293b);display:flex;justify-content:center;align-items:center;z-index:9999;animation:fadeOut 1s ease forwards;animation-delay:2.6s}
.splash-content{text-align:center;color:#e2e8f0}
.progress-bar{width:180px;height:6px;margin:18px auto 0;background:rgba(255,255,255,.15);border-radius:10px;overflow:hidden}
.progress-fill{height:100%;width:0%;background:linear-gradient(90deg,#a8dadc,#74c69d);animation:loadBar 2s ease forwards}
@keyframes fadeOut{to{opacity:0;visibility:hidden}}
@keyframes loadBar{from{width:0%}to{width:100%}}
</style>
</head>

<body>

<div id="splash">
  <div class="splash-content">
    <h1>Barcodic</h1>
    <p>Professional Barcode Generator</p>
    <div class="progress-bar"><div class="progress-fill"></div></div>
  </div>
</div>

<div class="app-frame">
  <button class="toggle-btn" onclick="toggleMode()">ðŸŒ™</button>
  <h2>Barcodic</h2>

  <div style="position:relative;width:100%;">
    <textarea id="barcodeInput" placeholder="Enter codes separated by commas"></textarea>
    <div id="validationStatus" style="position:absolute;top:8px;right:12px;font-size:20px;"></div>
  </div>

  <select id="formatSelect">
    <option value="EAN13">EAN-13 (ISBN)</option>
    <option value="EAN8">EAN-8</option>
    <option value="UPC">UPC</option>
    <option value="CODE128">CODE128</option>
    <option value="CODE39">CODE39</option>
    <option value="ITF14">ITF-14</option>
    <option value="MSI">MSI</option>
    <option value="Pharmacode">Pharmacode</option>
  </select>

  <input type="number" id="barWidth" value="2" min="1" placeholder="Bar Width">
  <input type="number" id="barHeight" value="70" min="40" placeholder="Bar Height">

  <label><input type="checkbox" id="showText" checked> Show Numbers</label>

  <button class="action" id="generateBtn">Generate Barcodes</button>
  <button class="action" id="downloadAllBtn">Download All as ZIP</button>

  <div id="barcodeContainer"></div>
  <footer>Â© Manik Roy 2026. All Rights Reserved.</footer>
</div>

<script>
function toggleMode(){document.body.classList.toggle("light")}

/* Validation */
function isValidISBN13(isbn){if(!/^\d{13}$/.test(isbn))return false;let s=0;for(let i=0;i<12;i++)s+=isbn[i]*(i%2?3:1);return (10-(s%10))%10==isbn[12]}
function validateCode(c,t){switch(t){case"EAN13":return isValidISBN13(c);case"EAN8":return/^\d{8}$/.test(c);case"UPC":return/^\d{12}$/.test(c);case"ITF14":return/^\d{14}$/.test(c);case"MSI":case"Pharmacode":return/^\d+$/.test(c);case"CODE39":return/^[0-9A-Z \-.$/+%]*$/.test(c);default:return c.length>0}}

const inputField=document.getElementById("barcodeInput");
const formatSelect=document.getElementById("formatSelect");
const validationStatus=document.getElementById("validationStatus");
const barcodeContainer=document.getElementById("barcodeContainer");
let generatedBarcodes=[];

function updateValidation(){
  const codes=inputField.value.split(",").map(c=>c.trim()).filter(Boolean);
  validationStatus.textContent=codes.length&&codes.every(c=>validateCode(c,formatSelect.value))?"âœ…":"âŒ";
}
inputField.addEventListener("input",updateValidation);
formatSelect.addEventListener("change",updateValidation);

document.getElementById("generateBtn").onclick=()=>{
  const items=inputField.value.split(',').map(i=>i.trim()).filter(Boolean);
  if(!items.length) return alert("Enter codes");
  if(!items.every(i=>validateCode(i,formatSelect.value))) return alert("Invalid code detected");
  barcodeContainer.innerHTML=""; generatedBarcodes=[];
  items.forEach(text=>{
    const svg=document.createElementNS("http://www.w3.org/2000/svg","svg");
    JsBarcode(svg,text,{format:formatSelect.value,width:2,height:70,displayValue:true});
    const div=document.createElement("div");div.className="barcode-item";
    div.innerHTML=`<div style="font-size:13px;opacity:.7">Type: ${formatSelect.value}</div>
                   <div style="font-weight:600;margin-bottom:6px">Code: ${text}</div>`;
    const btn=document.createElement("button");btn.className="action";btn.textContent="Download PNG";
    btn.onclick=()=>downloadPNG(svg,text);
    div.append(svg,btn); barcodeContainer.appendChild(div);
    generatedBarcodes.push({svg,filename:text});
  });
};

function downloadPNG(svg,name){
  const img=new Image(); img.onload=function(){
    const c=document.createElement("canvas");c.width=img.width;c.height=img.height;
    c.getContext("2d").drawImage(img,0,0);
    const a=document.createElement("a");a.href=c.toDataURL();a.download=name+".png";a.click();
  };
  img.src='data:image/svg+xml;base64,'+btoa(new XMLSerializer().serializeToString(svg));
}

/* GitHub Pages Service Worker */
if("serviceWorker" in navigator){
  window.addEventListener("load",()=>navigator.serviceWorker.register("/YOUR-REPO-NAME/sw.js"));
}
</script>
</body>
</html>
