<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Barcodic</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#7f9cff">

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>

<style>
:root{
  --bg1:#e6eef7;
  --bg2:#ffffff;
  --glass:rgba(255,255,255,0.35);
  --text:#222;
  --accent:#7f9cff;
}
body.dark{
  --bg1:#1c1f2b;
  --bg2:#2a2f40;
  --glass:rgba(40,45,60,0.6);
  --text:#eee;
}
body.amoled{
  --bg1:#000;
  --bg2:#0a0a0a;
  --glass:rgba(15,15,15,0.75);
  --text:#fff;
}
body{
  margin:0;
  font-family:system-ui;
  background:linear-gradient(145deg,var(--bg1),var(--bg2));
  display:flex;
  justify-content:center;
  padding:20px 10px;
  color:var(--text);
}

.app{
  width:100%;
  max-width:420px;
  backdrop-filter:blur(20px);
  background:var(--glass);
  border-radius:25px;
  padding:25px 22px 30px 22px; /* extra side padding to keep barcode away from edges */
  box-shadow:8px 8px 20px rgba(0,0,0,0.25), -8px -8px 20px rgba(255,255,255,0.15);
  position:relative;
  display:flex;
  flex-direction:column;
}

h1{text-align:center;margin:0 0 15px;font-size:22px}
label{font-size:13px;margin-top:8px;display:block}

input, select, button{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:12px;
  border:none;
  font-size:14px;
  background:var(--glass);
  color:var(--text);
  box-shadow:4px 4px 8px rgba(0,0,0,0.2), -4px -4px 8px rgba(255,255,255,0.2);
  box-sizing:border-box;
}

button{
  background:var(--accent);
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
}
button:hover{transform:translateY(-2px)}

.fieldGroup{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.canvasWrap{
  margin-top:18px;
  padding:16px;
  border-radius:16px;
  background:rgba(255,255,255,0.85);
  box-shadow:
    inset 3px 3px 8px rgba(0,0,0,0.08),
    inset -3px -3px 8px rgba(255,255,255,0.7);
  width:100%;
  box-sizing:border-box;
}

canvas{
  width:100%;
  height:auto;
  display:block;
  background:#fff;
  border-radius:12px;
  padding:10px;
  box-sizing:border-box;
}

.themeToggle{
  position:absolute;
  top:15px;
  right:15px;
  width:46px;
  height:46px;
  border-radius:50%;
  border:none;
  background:var(--accent);
  color:#fff;
  font-size:18px;
  cursor:pointer;
}

.warning{color:#ff4d4d;font-size:12px;margin-top:4px;display:none}
footer{text-align:center;font-size:12px;margin-top:18px;opacity:.7}
#printArea{display:none}
</style>
</head>

<body class="dark">
<div class="app">
<button class="themeToggle" id="themeToggle">ðŸŒ™</button>
<h1>Barcodic</h1>

<select id="type">
<option value="EAN13">EAN-13</option>
<option value="UPC">UPC-A</option>
<option value="CODE128">Code 128</option>
<option value="CODE39">Code 39</option>
<option value="ITF14">ITF-14</option>
<option value="Codabar">Codabar</option>
</select>

<div class="fieldGroup">
  <div><label id="label1"></label><input id="field1"></div>
  <div><label id="label2"></label><input id="field2"></div>
  <div><label id="label3"></label><input id="field3"></div>
</div>

<div id="validationMsg" class="warning"></div>

<h3>Barcode Settings</h3>
<label>Bar Width</label><input type="number" id="barcodeWidth" value="2">
<label>Bar Height</label><input type="number" id="barcodeHeight" value="90">
<label>Font Size</label><input type="number" id="barcodeFontSize" value="16">
<label>Show Text</label>
<select id="displayValue"><option value="true">Yes</option><option value="false">No</option></select>
<label>Bar Color</label><input type="color" id="barColor" value="#000000">

<button id="generateBtn">Generate Barcode</button>
<button id="downloadPNG">Download PNG</button>
<button id="downloadSVG">Download SVG</button>
<button id="resetBtn">Reset</button>

<div class="canvasWrap">
  <canvas id="barcodeCanvas"></canvas>
</div>

<button id="printLabels">Print A4 Labels</button>

<footer>Â© Manik Roy 2026. All Rights Reserved.</footer>
</div>

<div id="printArea"></div>

<script>
const themeToggle=document.getElementById("themeToggle");
const themes=["light","dark","amoled"];
let currentTheme=1;
function applyTheme(){
 document.body.className=themes[currentTheme];
 themeToggle.textContent=currentTheme===0?"â˜€ï¸":currentTheme===1?"ðŸŒ™":"âš«";
}
themeToggle.onclick=()=>{currentTheme=(currentTheme+1)%3;applyTheme();}
applyTheme();

const labelMap={
 EAN13:["GS1 Prefix","Manufacturer Code","Product Code"],
 UPC:["Number System Digit","Manufacturer Code","Product Code"],
 CODE128:["Primary Data","Batch / Lot Number","Internal Reference"],
 CODE39:["Product ID","Category Code","Serial Number"],
 ITF14:["Packaging Indicator","Company Prefix","Item Reference"],
 Codabar:["Organization Code","Category / Type","Serial Identifier"]
};

const label1=document.getElementById("label1");
const label2=document.getElementById("label2");
const label3=document.getElementById("label3");
const typeSel=document.getElementById("type");
const field1=document.getElementById("field1");
const field2=document.getElementById("field2");
const field3=document.getElementById("field3");

function updateLabels(){
 [label1,label2,label3].forEach((l,i)=>l.textContent=labelMap[typeSel.value][i]);
}
typeSel.addEventListener("change",()=>{updateLabels();generateBarcode();});
updateLabels();

const canvas=document.getElementById("barcodeCanvas");
const ctx=canvas.getContext("2d");
let svgString="";

function validateData(type,data){
 const msg=document.getElementById("validationMsg");
 msg.style.display="none";
 if(type==="EAN13"&&data.length!==13){msg.textContent="EAN-13 must be 13 digits";msg.style.display="block";return false;}
 if(type==="UPC"&&data.length!==12){msg.textContent="UPC-A must be 12 digits";msg.style.display="block";return false;}
 if(type==="ITF14"&&data.length!==14){msg.textContent="ITF-14 must be 14 digits";msg.style.display="block";return false;}
 return true;
}

function generateBarcode(){
 const data=field1.value+field2.value+field3.value;
 if(!field1.value){ctx.clearRect(0,0,canvas.width,canvas.height);return;}
 if(!validateData(typeSel.value,data)){ctx.clearRect(0,0,canvas.width,canvas.height);return;}

 canvas.width=canvas.clientWidth*2;
 canvas.height=120*2;
 ctx.setTransform(2,0,0,2,0,0);

 JsBarcode(canvas,data,{
  format:typeSel.value,
  width:+barcodeWidth.value,
  height:+barcodeHeight.value,
  fontSize:+barcodeFontSize.value,
  displayValue:displayValue.value==="true",
  lineColor:barColor.value
 });

 const svg=document.createElementNS("http://www.w3.org/2000/svg","svg");
 JsBarcode(svg,data,{format:typeSel.value,lineColor:barColor.value});
 svgString=new XMLSerializer().serializeToString(svg);
}

[field1,field2,field3,barcodeWidth,barcodeHeight,barcodeFontSize,displayValue,barColor]
.forEach(el=>el.addEventListener("input",generateBarcode));
generateBtn.onclick=generateBarcode;

downloadPNG.onclick=()=>canvas.toBlob(b=>{const a=document.createElement("a");a.href=URL.createObjectURL(b);a.download="barcode.png";a.click();});
downloadSVG.onclick=()=>{if(!svgString)return alert("Generate barcode first");const a=document.createElement("a");a.href=URL.createObjectURL(new Blob([svgString],{type:"image/svg+xml"}));a.download="barcode.svg";a.click();};

resetBtn.onclick=()=>{
 field1.value=field2.value=field3.value="";
 document.getElementById("validationMsg").style.display="none";
 ctx.clearRect(0,0,canvas.width,canvas.height);
 canvas.width=0;
 canvas.height=0;
 svgString="";
};

printLabels.onclick=()=>{
 const printArea=document.getElementById("printArea");
 printArea.innerHTML="";
 if(!canvas.width)return alert("Generate barcode first");
 for(let i=0;i<18;i++){
  const c=document.createElement("canvas");
  c.width=canvas.width;c.height=canvas.height;
  c.getContext("2d").drawImage(canvas,0,0);
  printArea.appendChild(c);
 }
 window.print();
};

if("serviceWorker" in navigator){
 navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>
